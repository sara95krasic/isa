<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<title>Bioskopi - Bioskop</title>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <script src="js/helpers.js"></script>

	<script>
		function setProjekcija(value) {
			$("#projekcije-select option[value='"+value+"']").prop('selected', true);
		}
	</script>

	<script>
		function dodajTerminProjekcije() {
			var projectionDate = getFormData($('#novi-termin-forma'));

			if (projectionDate.date.length == 0 || projectionDate.time.length == 0) {
				alert('Datum/vreme moraju biti navedeni!');
				return;
			}
			if (projectionDate.price == null) {
				alert('Cena mora biti navedena!');
				return;
			}

			var theater_id = getUrlParameter('id');
			var hall_label = projectionDate.hall_label;
			var projection_id = projectionDate.projection_id;
			delete projectionDate.projection_id;
			delete projectionDate.hall_label;
			
			var projectionDateJSON = JSON.stringify(projectionDate);
			$.ajax({
	   			url: "/theater_management/add_new_projection_date/" + theater_id + "/" + hall_label + "/" + projection_id,
	   			type:"POST",
	   			data: projectionDateJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null || s == 'false') {
	   					alert('Greska!');
	   				} else {
	   					alert('Dodat termin projekcije!');
	   					$('#dodaj-projekciju-modal').modal('hide');
	   				}
	   			}
			});
		}
	</script>
	
	<script>
		function dodajProjekciju() {
			var projection = getFormData($('#nova-projekcija-forma'));

			if (projection.title.trim().length == 0) {
				alert('Naziv mora biti naveden!');
				return;
			}
			
			var actors = projection.actors.split(',');
			for (i in actors) {
				actors[i] = actors[i].trim();
			}
			projection.actors = actors;
			

			var projectionJSON = JSON.stringify(projection);
			$.ajax({
	   			url: "theater_management/add_new_projection",
	   			type:"POST",
	   			data: projectionJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null) {
	   					alert('Greska!');
	   				} else {
	   					
	   					var projection = s;
	   					//ovde je sad i id projekcije, trebace za fajl upload
	   					//da znam od cega je slika
	   					
	   					//aj sad mos slati i sliku
						var file = $('input[name="poster-file"]').get(0).files[0];
			    		
			    	    var formData = new FormData();
			    	    formData.append('file', file);

    		    	    $.ajax({
    		    	        url: 'theater_management/upload_poster/' + projection.id,
    		    	        type: 'POST',
    		    	        data: formData,
    		    	        cache: false,
    		    	        contentType: false,
    		    	        processData: false,
    		    	        success: function(){
    		    	        	
    		   					alert('Dodata projekcija!');
    		   					$('#dodaj-projekciju-modal').modal('hide');
    		   					
    		    	        }
    		    	    });
	   					
	   				}
	   			}
			});
		}
	</script>

	<script >
	//nesto malo za preview ikonice i to
	  function loadFile(event) {
	    var output = document.getElementById('icon-preview');
	    output.src = URL.createObjectURL(event.target.files[0]);
	  }
	</script>

	<script>
		function setPosterFullView(title, poster) {
			$('#poster-full-view-title').text(title);
			$('#poster-full-view-img').attr('src', 'data:image/png;base64, '+poster)
		}
	</script>

	<script>
		function showAllProjections() {
			
			$('#repertoar').empty();
			
			theater_id = getUrlParameter('id');
			
			$.ajax({
	   			url: "registered/get_projections_for_theater/" + theater_id,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				projections = page.content;
	   				
	   				if (projections == null || projections.length == 0) {
	   					return;
	   				}
	   				
	   				projections.forEach(
	   					function (p, i) {
	   						var s = 
	   								"<li style='border-bottom:1px solid #c18093; padding:10px; background:white; min-height:90px;'> " +
											"<img class='small-poster' src='data:image/png;base64, "+p.poster+"' width='50' height='70' style='float:left; margin-right: 10px; padding:3px; border:1px solid #ccc;' data-toggle='modal' data-target='#poster-full-view-modal' onerror='this.src=\"images/missing.jpg\";' onclick='setPosterFullView(\""+p.title+"\", \""+p.poster+"\")'/>  " +
										"<div > " +
											"<div style='width:50%; float:left; vertical-align: top;'> " +
												"<div style='font-weight: bold;'>"+p.title+"</div> " +
												"<div>"+p.runtime+" min.</div> " +
											"</div> " +
											"<div style='width:40%; margin-left:auto; text-align:right;'> ";
							
							$.ajax({
					   			url: "registered/get_projectiondates_for_theater_for_projection/" + theater_id + "/" + p.id,
					   			type:"GET",
					   			dataType:"json",
					   			complete: function(data) {
					   				page = JSON.parse(data.responseText);
					   				projectionDates = page.content;
							
					   				if (projectionDates == null || projectionDates.length == 0)
					   					return;
					   				
					   				projectionDates.forEach(
				   						function (pd, ii) {
 				   							s += "<div style='display: inline-block; background:#A16073; padding:5px 5px; text-align: center; margin-bottom:4px;' > " +
												"<div style='color:black; background:#e1f7d5; padding: 2px 5px;'>"+pd.date+"</div> " +
												"<div style='color:white'>sala "+pd.hallLabel+"</div> " +
												"<div style='color:white'>"+pd.time+"</div> " +
												"<div style='color:white; font-weight: bold;'>"+pd.price+" din</div> " +
												"<button class='flat-button-2' style='color:white; font-weight: bold; padding: 2px 5px;' data-toggle='modal' data-target='#karte-na-popustu-modal' onclick='setupKarteNaPopustuModal("+pd.id+", \""+p.title+"\", \""+pd.date+"\", \""+pd.time+"\", \""+pd.hallLabel+"\")'>karte na popustu</button> " +
											"</div> ";
				   						}
			   						)
									s +=		
													"<button class='flat-button' style='display: inline-block; padding:5px 5px; text-align: center; margin-bottom:4px;'  data-toggle='modal' data-target='#dodaj-termin-projekcije-modal' onclick='setProjekcija("+p.id+")'> " +
														"Dodaj termin" +
													"</button> ";
												"</div> " +
											"</div> " +
										"</li>"
	   								$('#repertoar').append(s);
	   							}
							});//ajax
	   					}//function(p,i)
	   				);//projections.forEach
	   			}
			});//ajax
		}
	</script>

	<script>
		function setupKarteNaPopustuModal(projectionDateId, projectionTitle, projectionDateDate, projectionDateTime, projectionDateHallLabel) {
			$.ajax({
	   			url: "registered/get_discount_seats_for_projection_date/" + projectionDateId,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				d_seats = JSON.parse(data.responseText); //ne vraca page, samo obicnu List<DiscountSeat>
	   				
	   				if (d_seats == null) {
	   					return;
	   				}

					$('#karte-na-popustu-modal-title').text(projectionTitle);
					$('#karte-na-popustu-modal-date').text(projectionDateDate);
					$('#karte-na-popustu-modal-time').text(projectionDateTime);
					$('#karte-na-popustu-modal-hall-label').text(projectionDateHallLabel);
					
					$('#projection-date-id-hidden-input').attr('value', projectionDateId); //stavlja id projectionDatea u skriveno polje u formi za dodavanje novog sedista na popustu
					$('#hall-label-hidden-input').attr('value', projectionDateHallLabel);
					
					$('#karte-na-popustu-lista').empty();
	   				
	   				d_seats.forEach(
	   					function (d_seat, i) {
	   						$('#karte-na-popustu-lista').append(
   					      		"<li style='padding:5px 10px; background:#c18093; color: white; margin-bottom: 2px;'> " + 
	   				      			"<div style='display: inline-block;'>Red "+d_seat.seat.row+", Sediste "+d_seat.seat.number+", segment "+d_seat.seat.segment.label+", popust "+d_seat.discount+"%</div> " +
	   				      			"<div style='display: inline-block; text-align: right; float:right;'><span style='text-decoration: line-through;'>"+d_seat.projectionDate.price+" din</span> "+String(d_seat.projectionDate.price-(d_seat.projectionDate.price*d_seat.discount/100))+" din</div> " +
	   				      			"<div style='width: 100%; text-align: right;'><button class='flat-button' style='padding:2px 5px;' onclick='obrisiKartuNaPopustu("+d_seat.projectionDate.id+", "+d_seat.seat.number+", "+d_seat.seat.row+", \""+d_seat.seat.segment.label+"\", \""+d_seat.seat.segment.hall.label+"\")'>Obrisi</button></div> " +
	   				      		"</li>"
   							);

	   					}
   					);//forEach
	   			}
			});
			
		}
	</script>
	
	<script>
		function obrisiKartuNaPopustu(projection_date_id, seat_num, seat_row, segment_label, hall_label) {

			var theater_id = getUrlParameter('id');
			
			var discountSeat = {};
			discountSeat.projectionDate = {}
			discountSeat.projectionDate.id = projection_date_id;
			discountSeat.seat = {};
			discountSeat.seat.number = seat_num;
			discountSeat.seat.row = seat_row;
			discountSeat.seat.segment = {};
			discountSeat.seat.segment.label = segment_label;
			discountSeat.seat.segment.hall = {};
			discountSeat.seat.segment.hall.label = hall_label;
			discountSeat.seat.segment.hall.theater = {};
			discountSeat.seat.segment.hall.theater.id = theater_id;
			
			var discountSeatJSON = JSON.stringify(discountSeat);
			$.ajax({
	   			url: "/theater_management/delete_discount_seat",
	   			type:"POST",
	   			data: discountSeatJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null || s == false) {
	   					alert('Brisanje nije uspelo!');
	   				} else {
	   					alert('Obrisano mesto na popustu!');
	   				}
	   			}
			});
		}
	</script>


	<script>
		function popuniIzborProjekcijaUModalu() {
			$.ajax({
	   			url: "registered/get_all_projections",
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				projections = page.content;
	   				
	   				if (projections == null || projections.length == 0) {
	   					return;
	   				}
	   				projections.forEach(function(p, i) {
	   					$('#projekcije-select').append("<option value="+p.id+">"+p.title+"</option>");
	   				});
   				}
			});
		}
	</script>
	<script>
		function popuniIzborSalaUModalu() {
			var theater_id = getUrlParameter('id');
			$.ajax({
	   			url: "registered/get_all_hall_labels_for_theater/" + theater_id,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				halls = page.content;
	   				
	   				if (halls == null || halls.length == 0) {
	   					return;
	   				}
	   				halls.forEach(function(h, i) {
	   					$('#sale-select').append("<option value='"+h+"'>"+h+"</option>");
	   				});
   				}
			});
		}
	</script>

	<script>
		//a u principu skoro isto kao ova gore, al aj bolje da imamo 2 ako treba menjati nesto
		function popuniSelectZaPregledSala() {
			var theater_id = getUrlParameter('id');
			$.ajax({
	   			url: "registered/get_all_hall_labels_for_theater/" + theater_id,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				halls = page.content;

   					$('#sale-pregled-select').empty();
   					
	   				if (halls == null || halls.length == 0) {
	   					return;
	   				}
	   				halls.forEach(function(h, i) {
	   					$('#sale-pregled-select').append("<option value='"+h+"'>"+h+"</option>");
	   					if (i == 0) namestiSelectSaSegmentimaZaSalu();
	   				});
				}
			});
		}
	</script>
	
	<script>
		$(document).ready(function(){
			

			var theater_id = getUrlParameter('id');
		
			if (theater_id == "") {
				return;
			}
		
			$.ajax({
	   			url: "public/get_theater_by_id/" + theater_id,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				var theater = JSON.parse(data.responseText);
	   				
	   				if (theater == null) {
	   					return;
	   				}

	   				$('#naziv-bioskopa').val(theater.name)
	   				$('#adresa-bioskopa').val(theater.address)
	   				$('#desc-bioskopa').html(theater.description)
		   			theater.type == 'MOVIE_THEATER' ? $("#movie-theater-radio").attr('checked', 'checked') : $("#play-theater-radio").attr('checked', 'checked');
	   			
	   			
		   			showAllProjections();
	   			
	   			}
			});
			
			popuniIzborProjekcijaUModalu();
			popuniIzborSalaUModalu();
			
			popuniSelectZaPregledSala();
	   				
		})
	</script>
	<script>
		function updateTheater() {
			var theater_id = getUrlParameter('id');
		
			if (theater_id == "") {
				return;
			}
			
			var theater = getFormData($('#update-form'));
			var theaterJSON = JSON.stringify(theater);
			$.ajax({
	   			url: "theater_management/update_theater/" + theater_id,
	   			type: "POST",
	   			data: theaterJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null || s == 'false') {
	   					alert('Greska!');
	   				} else {
	   					alert('Azurirane informacije!');
	   				}
				}
			});
		}
	</script>
	
	<script>
		function dodajKartuNaPopustu() {
			var discountSeat = {}
			discountSeat.seat = {}
			discountSeat.seat.number = $('#karta-na-popustu-forma>input[name="seat-number"]').val();
			discountSeat.seat.row = $('#karta-na-popustu-forma>input[name="seat-row"]').val();
			discountSeat.seat.segment = {}
			discountSeat.seat.segment.label = $('#karta-na-popustu-forma>input[name="segment"]').val();
			discountSeat.seat.segment.hall = {}
			discountSeat.seat.segment.hall.label = $('#karta-na-popustu-forma>input[name="hall-label"]').val();
			discountSeat.seat.segment.hall.theater = {}
			discountSeat.seat.segment.hall.theater.id = getUrlParameter('id');
			discountSeat.discount = $('#karta-na-popustu-forma>input[name="discount"]').val();
			discountSeat.projectionDate = {}
			discountSeat.projectionDate.id = $('#karta-na-popustu-forma>input[name="projection-date-id"]').val();

			var discountSeatJSON = JSON.stringify(discountSeat);
			$.ajax({
	   			url: "theater_management/add_new_discount_seat",
	   			type:"POST",
	   			data: discountSeatJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null || s == false) {
	   					alert('Greska!');
	   				} else {
	   					alert('Uspesno dodata karta na popustu!')
	   				}
	   			}
			});			
		}
	</script>
	
	<script>
		//prima red i broj sedista kao parametre
		function toggleSediste(r, s) {
			var theater_id = getUrlParameter('id');
			var hall_label = $('#sale-pregled-select').val();
			var segment_label = $('#segmenti-pregled-select').val();
			
			if (hall_label == null || segment_label == null) {
				return; //nesto nije selektovan, nema u cega da doda sediste
			}

			var seat = {}
			seat.number = s;
			seat.row = r;
			seat.segment = {};
			seat.segment.label = segment_label;
			seat.segment.hall = {};
			seat.segment.hall.label = hall_label
			seat.segment.hall.theater = {};
			seat.segment.hall.theater.id = theater_id;
			var seatJSON = JSON.stringify(seat);
			
			if ($('#seat-'+r+'-'+s).hasClass('empty')) {
				//dodaj
				$.ajax({
		   			url: "theater_management/add_new_seat",
		   			type:"POST",
		   			data: seatJSON,
					contentType:"application/json",
		   			dataType:"json",
		   			complete: function(data) {
		   				var resp = JSON.parse(data.responseText);
		   				
		   				if (resp == null || resp == false) {
		   					//greska
		   				} else {
		   					//prosao
		   					$('#seat-'+r+'-'+s).removeClass('empty');
		   				}
		   			}
				});
			} else {
				//obrisi
				$.ajax({
		   			url: "theater_management/remove_seat",
		   			type:"POST",
		   			data: seatJSON,
					contentType:"application/json",
		   			dataType:"json",
		   			complete: function(data) {
		   				var resp = JSON.parse(data.responseText);
		   				
		   				if (resp == null || resp == false) {
		   					//greska
		   				} else {
		   					//prosao
		   					$('#seat-'+r+'-'+s).addClass('empty');
		   				}
		   			}
				});
			}
			
		}
	</script>
	
	<script>
		function prikaziDetaljeSegmenta() {
			var theater_id = getUrlParameter('id');
			var hall_label = $('#sale-pregled-select').val();
			var segment_label = $('#segmenti-pregled-select').val();

			$('#seats-div').empty();
			$('#sedista-tip').css('display', 'none');
			
			if (hall_label == null || segment_label == null) {
				return;
			}
			
			
			$.ajax({
	   			url: "registered/get_segment_by_label_for_hall_for_theater/" + segment_label + "/" + theater_id + "/" + hall_label,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				if (data.responseText == "") return;
	   				
	   				segment = JSON.parse(data.responseText);
	   				
	   				if (segment == null) return;
	   				
					if (segment.segmentType == 'STANDARD')
						$('#tip-segmenta-span').text('(standardni)');
					else if (segment.segmentType == 'BALCONY')
						$('#tip-segmenta-span').text('(balkon)');
					else if (segment.segmentType == 'VIP')
						$('#tip-segmenta-span').text('(VIP)');
					
					//sad treba namestiti sedista...
					for (var r = 1; r <= 10; r++) {
						var row = "<div style='display:inline-block; width: 25px;'>"+r + " </div>";
						for (var s = 1; s <= 20; s++) {
							row += "<button class='seat empty' id='seat-"+r+"-"+s+"' onclick='toggleSediste("+r+", "+s+")'>"+s+"</button>";
						}
						row += "<br>"
						$('#seats-div').append(row)
					}
					//okej to je prikaz generalno, sad treba oznaciti mesta koja postoje
					
					for (var s in segment.seats) {
						var row_num = segment.seats[s].row;
						var seat_num = segment.seats[s].number;
						$('#seat-'+row_num+"-"+seat_num).removeClass('empty');
					}
					
					$('#sedista-tip').css('display', 'inline-block');
	   			}
			});
		}
	</script>
	<script>
		function namestiSelectSaSegmentimaZaSalu() {
			
			var theater_id = getUrlParameter('id');
			var hall_label = $('#sale-pregled-select').val();
			
			$.ajax({
	   			url: "registered/get_all_segments_for_hall_for_theater/" + theater_id + "/" + hall_label,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				segs = JSON.parse(data.responseText);
	   				//segs = page.content;
	   				
   					$('#segmenti-pregled-select').empty();
   					
	   				if (segs == null) {
	   					return;
	   				}
	   				
	   				segs.forEach(function(s, i) {
	   					$('#segmenti-pregled-select').append("<option value='"+s.label+"'>"+s.label+"</option>");
	   				});
	   				prikaziDetaljeSegmenta();
				}
			});
		}
	</script>
	
	<script>
		function dodajSalu() {
			var theater_id = getUrlParameter('id');
			var hall_label = $('#oznaka-nove-sale').val();
			$.ajax({
	   			url: "theater_management/add_new_hall_for_theater/" + theater_id + "/" + hall_label,
	   			type:"POST",
	   			dataType:"json",
	   			complete: function(data) {
	   				r = JSON.parse(data.responseText);
	   				
	   				if (r == null || r == false) {
	   					alert('Neuspesno dodavanje sale!');
	   				} else {
	   					alert('Uspesno dodana sala!');
	   					$('#dodaj-salu-modal').modal('hide');
	   					popuniSelectZaPregledSala();
	   					$('#sale-pregled-select').val(hall_label); //da je odmah i selektuje u onom prikazu
	   				}
	   				
	   				
				}
			});
		}
	</script>
	
	<script>
		function obrisiSalu() {
			var theater_id = getUrlParameter('id');
			var hall_label = $('#sale-pregled-select').val();
			
			$.ajax({
	   			url: "theater_management/delete_hall/" + theater_id + "/" + hall_label,
	   			type:"DELETE",
	   			dataType:"json",
	   			complete: function(data) {
	   				r = JSON.parse(data.responseText);
	   				
	   				if (r == null || r == false) {
	   					alert('Neuspesno brisanje sale!');
	   				} else {
	   					alert('Uspesno obrisana sala!');
	   					popuniSelectZaPregledSala();
	   				}
	   				
	   				
				}
			});
		}
	</script>
	
	<script>
		function dodajSegment() {
			var segment = {}
			segment.segmentType = $('#dodaj-segment-forma>select[name="segment-type"]').val();
			segment.label = $('#dodaj-segment-forma>input[name="label"]').val();
			segment.hall = {}
			segment.hall.label = $('#sale-pregled-select').val();
			segment.hall.theater = {}
			segment.hall.theater.id = getUrlParameter('id');

			var segmentJSON = JSON.stringify(segment);
			$.ajax({
	   			url: "theater_management/add_new_segment",
	   			type:"POST",
	   			data: segmentJSON,
				contentType:"application/json",
	   			dataType:"json",
	   			complete: function(data) {
	   				var s = JSON.parse(data.responseText);
	   				
	   				if (s == null || s == false) {
	   					alert('Greska!');
	   				} else {
	   					alert('Uspesno dodat segment!');
	   					namestiSelectSaSegmentimaZaSalu();
	   					$('#segment-pregled-select').val(segment.label); //i selektuj ga odmah
	   				}
	   			}
			});			
		}
	</script>
	
	<script>
		function obrisiSegment() {
			var theater_id = getUrlParameter('id');
			var hall_label = $('#sale-pregled-select').val();
			var segment_label = $('#segmenti-pregled-select').val();
			
			$.ajax({
	   			url: "theater_management/delete_segment/" + theater_id + "/" + hall_label + "/" + segment_label,
	   			type:"DELETE",
	   			dataType:"json",
	   			complete: function(data) {
	   				r = JSON.parse(data.responseText);
	   				
	   				if (r == null || r == false) {
	   					alert('Neuspesno brisanje segmenta!');
	   				} else {
	   					alert('Uspesno obrisan segment!');
	   					namestiSelectSaSegmentimaZaSalu();
	   				}
	   				
	   				
				}
			});
		}
	</script>
	
	
	<style>
	
		/*header u vrhu stranice*/
		.top-header {
            background: white;
            min-height: 40px;
            margin: 20px 30px -5px 30px;
            padding: 5px 10px;
            
		}
		
		.top-header .title {
			color : #555;
            font-size: 27px;
		}
		
		/*centralni sadrzaj stranice*/
		.content {
			padding : 10px;
			margin: 30px 15px 150px 15px;
		}
		
		.blok {
			height: 500px;
			padding-bottom: 50px;
		}
		
		.header {
			background : #A16073;
			color : white;
			padding : 5px;
		}
		
		.flat-button {
			border: 0;
			background: #A16073;
			color: white;
			padding: 10px 15px;
			box-shadow: none;
			border-radius: 0px;
			-webkit-appearance: none;
			transition: background 0.1s linear;
		}
		.flat-button:HOVER {
			background: #c18093;
		}
		
		.flat-button-2 {
			border: 0;
			background: #c18093;
			color: white;
			padding: 10px 15px;
			box-shadow: none;
			border-radius: 0px;
			-webkit-appearance: none;
			transition: background 0.1s linear;
		}
		.flat-button-2:HOVER {
			background: #e1a0b3;
		}
		
		/*da zamenim ruzni file chooser*/
		.file {
			width: 0.1px;
			height: 0.1px;
			opacity: 0;
			overflow: hidden;
			position: absolute;
			z-index: -1;
		}
		.file-label {
			cursor: pointer;
			font-weight: normal !important;
		}
		
		.small-poster {
			cursor: pointer;
		}
		.small-poster:HOVER {
			opacity : 0.5;
		}
		
		
		.seat {
			border: 0;
			background: #c18093;
			color: white;
			width: 20px;
			height: 20px;
			padding:0px;
			margin: 2px;
			box-shadow: none;
			border-radius: 0px;
			-webkit-appearance: none;
			transition: background 0.1s linear;
		}
		.empty {
			background: #e1f7d5;
		}
		.seat:HOVER {
			background: #e1a0b3;
		}
	</style>
					
</head>
<body style='background:#e1f7d5;'>
	<div class='top-header'>
		<span style='color:#ccc;font-size:18px;'>&lt;&lt;&nbsp;</span><a href='/' class='title'>Bioskopi i pozorista</a>
	</div>
	
	<div class='content'>
		<div class='row' style='padding-bottom:20px;  margin-right: 0px;'>
			<div class='col-sm-6' style=''>
				<div class='header'>Osnovni podaci</div>
				<form id='update-form' action='' style='background:white; padding:10px;'>
					<span style='display:inline-block;width:20%;margin:5px;'>Naziv: </span><input style='width:75%;' name='name' type='text' id='naziv-bioskopa'><br>
					<span style='display:inline-block;width:20%;margin:5px;'>Adresa: </span><input style='width:75%;' name='address' type='text' id='adresa-bioskopa'><br>
					<span style='display:inline-block;width:20%;margin:5px;'>Tip: </span><input type="radio" name="theaterType" value="MOVIE_THEATER" id='movie-theater-radio'> Bioskop<br>
		 				<span style='display:inline-block;width:20%;margin:5px;'></span><input type="radio" name="theaterType" value="PLAY_THEATER" id='play-theater-radio'> Pozoriste<br>
					<span style='display:inline-block;width:20%;margin:5px;'>Opis: </span><textarea name='description' rows="4" style='resize:none;width:75%' id='desc-bioskopa'></textarea><br>
					<div style='text-align: right; margin:5px;'><input class='flat-button' type='button' onclick="updateTheater()" value='Azuriraj podatke'></div>
				</form>
			</div>
			<div class='col-sm-6' style='background:white; padding:0px;'>
				<div class='header' style=''>Sale</div>
				<div style='padding:10px 15px;'>
					<select id='sale-pregled-select' style='margin-bottom:10px; min-width: 150px;' onchange='namestiSelectSaSegmentimaZaSalu()'>
					</select>
					<div style='text-align: right;'>
						<button class='flat-button' onclick="obrisiSalu()" id='obrisi-salu-button'>Obrisi ovu salu</button>
						<button class='flat-button'   data-toggle='modal' data-target='#dodaj-salu-modal'>Dodaj salu</button>
					</div>
				</div>
				<div class='header' style='margin:0px 10px;'>Segmenti</div>
				<div style='padding:10px 15px;'>
					<select id='segmenti-pregled-select' style='margin-bottom:10px; min-width: 150px;' onchange="prikaziDetaljeSegmenta()">
					</select>
					<span style='color:#aaa;' id='tip-segmenta-span'></span>
					<div id='seats-div' style='padding-bottom: 10px;'>
					
					</div>
					<div style='color:#aaa; margin-bottom:10px; display:none;' id='sedista-tip'>(kliknite na sedise da ga dodate ili izbrisete iz segmenta)</div>
					<div style='text-align: right;'>
						<button class='flat-button' onclick='obrisiSegment()'>Obrisi ovaj segment</button>
						<button class='flat-button'   data-toggle='modal' data-target='#dodaj-segment-modal'>Dodaj segment</button>
					</div>
				</div>
			</div>
		</div>
	
		<div class='row' >
			<div class='col-sm-12 blok'>
				<div class='header'>Repertoar</div>
				<ul id='repertoar' class='repertoar-ul' style='list-style: none; margin-bottom:0px; padding-left:0px;'>
						
	
						
				</ul>
				<div style='text-align: right; background:white;'>
					<button class='flat-button'  data-toggle='modal' data-target='#dodaj-termin-projekcije-modal' style='margin:5px;'>Dodaj termin projekcije</button><br>
					<div style='width: 100%; border-bottom: #c18093 solid 1px;'></div>
				</div>
				<div style='text-align:right; padding: 5px;'>
					<button class='flat-button' data-toggle='modal' data-target='#dodaj-projekciju-modal'>Dodaj projekciju</button>
				</div>
			</div>
		</div>
		
	</div>
	
	<div id="dodaj-segment-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog" >
	    <div class="modal-content" style='border-radius:0px; border:0px;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Dodaj segment</h4>
	      </div>
		      <div class="modal-body">
	        	<form id='dodaj-segment-forma'>
		        	<span style='display:inline-block;width:100px;'>Oznaka</span><input type='text' name='label' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Tip</span><select name='segment-type' style='margin-bottom: 5px;'>
		        		<option value="STANDARD">Standardni</option>
		        		<option value="BALCONY">Balkon</option>
		        		<option value="VIP">VIP</option>
		        	</select><br>
  	        	</form>
        	 </div>
		      <div class="modal-footer">
					<button class="flat-button" onclick='dodajSegment()'>Dodaj</button>
		      </div>
	    </div>
	  </div>
	</div>
	
	<div id="dodaj-salu-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog" >
	    <div class="modal-content" style='border-radius:0px; border:0px;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Dodaj salu</h4>
	      </div>
		      <div class="modal-body">
	        	<form id='nova-sala-forma'>
		        	<span style='display:inline-block;width:100px;'>Oznaka</span><input type='text' name='label' id='oznaka-nove-sale' style='margin-bottom: 5px;'><br>
  	        	</form>
        	 </div>
		      <div class="modal-footer">
					<button class="flat-button" onclick='dodajSalu()'>Dodaj</button>
		      </div>
	    </div>
	  </div>
	</div>
	
	<div id="dodaj-projekciju-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog" >
	
	    <!-- Modal content-->
	    <div class="modal-content" style='border-radius:0px; border:0px;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Dodaj projekciju</h4>
	      </div>
		      <div class="modal-body">
	        <form id='nova-projekcija-forma'>
		        	<img id="icon-preview" src="#" onerror="this.src='images/missing.jpg';" style='float:right; max-height: 200px; max-width: 140px; overflow: hidden; border:1px solid #ccc; padding: 5px;'/></dt>
					<span style='display:inline-block;width:100px;'>Naziv</span><input type='text' name='title' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Zanr</span><input type='text' name='genre' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Reziser</span><input type='text' name='director' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Trajanje</span><input type="number" name='runtime' style='margin-bottom: 5px;'><br>
		        	<span style='margin-bottom: 5px;'><span style='display:inline-block;width:100px;'>Opis</span><textarea name='description' style='resize:none;' rows='5' cols='40'></textarea></span><br>
		        	<span style='margin-bottom: 5px;'><span style='display:inline-block;width:100px;'>Glumci</span><textarea name='actors' style='resize:none;' rows='3' cols='40'></textarea></span><br>
		     		<span style='display:inline-block;width:100px;'>Poster</span><label for="ikonica" class="flat-button file-label">Odaberite sliku postera</label><input style='display: inline-block;' type="file" name="poster-file" accept="image/*" id="ikonica" class="file" required="required" onchange="loadFile(event)">
        	</form>
        	 </div>
	      
		      <div class="modal-footer">
<!-- 		        <input type="submit" class="flat-button" data-dismiss="modal" value='Dodaj'> -->
					<button class="flat-button" onclick='dodajProjekciju()'>Dodaj</button>
		      </div>
	    </div>
	
	  </div>
	</div>
	
	
	<div id="dodaj-termin-projekcije-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog" >
	
	    <!-- Modal content-->
	    <div class="modal-content" style='border-radius:0px; border:0px;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title">Dodaj termin projekcije</h4>
	      </div>
		      <div class="modal-body">
	        <form id='novi-termin-forma'>
		        	<span style='display:inline-block;width:100px;'>Projekcija</span><select id='projekcije-select' name='projection_id' style='margin-bottom: 5px;'></select><br>
		        	<span style='display:inline-block;width:100px;'>Datum</span><input type="date" name='date' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Vreme</span><input type="time" name='time' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Cena</span><input type="number" name='price' style='margin-bottom: 5px;'><br>
		        	<span style='display:inline-block;width:100px;'>Sala</span><select id='sale-select' name='hall_label' style='margin-bottom: 5px;'></select><br>
		     
        	</form>
        	 </div>
	      
		      <div class="modal-footer">
<!-- 		        <input type="submit" class="flat-button" data-dismiss="modal" value='Dodaj'> -->
					<button class="flat-button" onclick='dodajTerminProjekcije()'>Dodaj termin</button>
		      </div>
	    </div>
	
	  </div>
	</div>
	
	<div id="poster-full-view-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	    <div class="modal-content" style='border-radius:0px; border:0px; max-height: 100vh;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title" id='poster-full-view-title'></h4>
	      </div>
	      <div class="modal-body" style='text-align: center;'>
	        <img id='poster-full-view-img' style='max-height: 80vh;' onerror='this.src="images/missing.jpg";' />
	      </div>
	    </div>
	
	  </div>
	</div>
	
	<div id="karte-na-popustu-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog" >
	
	    <div class="modal-content" style='border-radius:0px; border:0px;'>
	      <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h4 class="modal-title" >Karte na popustu - <span id='karte-na-popustu-modal-title'>Ready Player One</span></h4>
	      </div>
		      <div class="modal-body">
		      	<div style='margin-bottom: 5px;'><span id='karte-na-popustu-modal-date'>2014-20-20</span>, <span id='karte-na-popustu-modal-time'>02:20:00</span>, sala <span id='karte-na-popustu-modal-hall-label'>2</span></div>
		      	<ul style='list-style: none; padding-left:0px; margin-bottom: 2px;' id='karte-na-popustu-lista'>
<!-- 		      		<li style='padding:5px 10px; background:#c18093; color: white; margin-bottom: 2px;'>
		      			<div style='display: inline-block;'>Sediste 14, popust 20%</div>
		      			<div style='display: inline-block; text-align: right; float:right;'><span style='text-decoration: line-through;'>300 din</span> 240 din</div>
		      			<div style='width: 100%; text-align: right;'><button class='flat-button' style='padding:2px 5px;'>Obrisi</button></div>
		      		</li> -->
		      	</ul>
		      	<div style='text-align: right;'>
					<button class='flat-button' data-toggle='modal' data-target='#dodaj-kartu-na-popustu-modal'>Dodaj kartu</button>
				</div>
        	 </div>
	      
		      <div class="modal-footer">
 		        <button class="flat-button" data-dismiss="modal">Okej</button>
		      </div>
	    </div>
	
	  </div>
	</div>
	
	<div id="dodaj-kartu-na-popustu-modal" class="modal fade" role="dialog">
	  <div class="modal-dialog">
	    <div class="modal-content" style='border-radius:0px; border:0px; max-height: 100vh;'>
	     <div class="modal-header header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        Dodaj kartu
	      </div>
	      <div class="modal-body" style='text-align: center;'>
		        <form id='karta-na-popustu-forma'>
			        	<span style='display:inline-block;width:100px;'>Segment</span><input type="text" name='segment' style='margin-bottom: 5px;'><br>
			        	<span style='display:inline-block;width:100px;'>Broj sedista</span><input type="number" name='seat-number' style='margin-bottom: 5px;'><br>
			        	<span style='display:inline-block;width:100px;'>Red</span><input type="number" name='seat-row' style='margin-bottom: 5px;'><br>
			        	<span style='display:inline-block;width:100px;'>Popust (%)</span><input type="number" name='discount' style='margin-bottom: 5px;'><br>
			        	<input type="hidden" name='projection-date-id' id='projection-date-id-hidden-input' value="">
			        	<input type="hidden" name='hall-label' id='hall-label-hidden-input' value="">
	        	</form>
	      </div>
      
	      <div class="modal-footer">
		        <button class="flat-button" data-dismiss="modal" onclick='dodajKartuNaPopustu()'>Dodaj</button>
	      </div>
	    </div>
	  </div>
	</div>
	
	
</body>
</html>