<!DOCTYPE html>
<html>
<head>
	<meta charset="ISO-8859-1">
	<title>Bioskopi - pocetna</title>
	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">

	
	<script>
		function popuniBioskope(bioskopi) {
	
			if (bioskopi.length == 0) {
				$('#bioskopi').append(
					'<li style="font-style:italic;color:grey;">nema rezulata</li>'
					);
				return;
			}
			
			
			bioskopi.forEach(function (b, i) {
				
				ocena = "";
				for (i = 0; i < b.averageRating; i++) { 
				    ocena += "$";
				}
				
				$('#bioskopi').append(
					'<li>' +
					'<span>' + b.name + '</span><br>' + 
					'<span><span style="color:gray; float: left;">' + b.address + '</span>' + 
					'<span style="float: right;">' + ocena + '</span></span>' +
					'<a href="theater-basic.html?id=' + b.id + '">' +
					'<span class="link-spanner"></span>' +
					'</a></li>'
					);
			});
		}
	</script>
	<script>
		function popuniPozorista(pozorista) {
	
			if (pozorista.length == 0) {
				$('#pozorista').append(
					'<li style="font-style:italic;color:grey;">nema rezulata</li>'
					);
				return;
			}
			
			
			pozorista.forEach(function (b, i) {
				
				ocena = "";
				for (i = 0; i < b.averageRating; i++) { 
				    ocena += "$";
				}
				
				$('#pozorista').append(
					'<li>' +
					'<span>' + b.name + '</span><br>' + 
					'<span><span style="color:gray; float: left;">' + b.address + '</span>' + 
					'<span style="float: right;">' + ocena + '</span></span>' +
					'<a href="theater-basic.html?id=' + b.id + '">' +
					'<span class="link-spanner"></span>' +
					'</a></li>'
					);
			});
		}
	</script>
	
    <script>
	    function traziBioskope() {
	    	
			//ocisti <ul> element
			$('#bioskopi').empty();
	    	
	    	search_param = $('#bioskopi-search-box').val();
	    	
	    	if (search_param == "") {
	    		//kada se ocisti search box, refersuje view bioskopa
	    		showAllMovieTheaters();
	    		return;
	    	}
	    	
	   		$.ajax({
	   			url: "search/movietheater/" + search_param,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				bioskopi = page.content
	
	   				popuniBioskope(bioskopi)
	   			}
	   		});
	    }
    </script>
    
    <script>
	    function traziPozorista() {
	    	
			//ocisti <ul> element
			$('#pozorista').empty();
	    	
	    	search_param = $('#pozorista-search-box').val();
	    	
	    	if (search_param == "") {
	    		//kada se ocisti search box, refersuje view bioskopa
	    		showAllPlayTheaters();
	    		return;
	    	}
	    	
	   		$.ajax({
	   			url: "search/playtheater/" + search_param,
	   			type:"GET",
	   			dataType:"json",
	   			complete: function(data) {
	   				page = JSON.parse(data.responseText);
	   				pozorista = page.content
	
	   				popuniPozorista(pozorista)
	   			}
	   		});
	    }
    </script>
	
	<!-- poziva se pri loadu strane i na prazan search -->  
	<script>
		function showAllMovieTheaters() {
			$.ajax({
				url: "allmovietheaters",
				type:"GET",
				dataType:"json",
				complete: function(data) {
					page = JSON.parse(data.responseText);
					bioskopi = page.content
					
					popuniBioskope(bioskopi)
				}
			});
		}
	</script>   
 	<script>
		function showAllPlayTheaters() {
			$.ajax({
				url: "allplaytheaters",
				type:"GET",
				dataType:"json",
				complete: function(data) {
					page = JSON.parse(data.responseText);
					pozorista = page.content
					
					popuniPozorista(pozorista)
				}
			});
		}
	</script>
	  
	<script>
		$(document).ready(function(){
			showAllMovieTheaters();
			showAllPlayTheaters();
		})
	</script>
	
	
	
	<style>
	
		@font-face {
		    font-family: LoveloBold;
		   	src: url('fonts/Lovelo Black.otf')
		}
	
		/*header u vrhu stranice*/
		.top-header {
            background: white;
            min-height: 100px;
            margin: 20px 30px -5px 30px;
            text-align: center;
            
		}
		
		.top-header .title {
			color : #555;
            font-size: 64px;
		}
		.top-header .subtitle {
			color : #555;
            font-size: 16px;
		}
		
		/*centralni sadrzaj stranice*/
		.content {
			margin: 15px 15px 50px 15px;
		}
		
		.bioskopi-widget {
		
		}
		
		.bioskopi-widget .header {
			background : #A16073;
			color : white;
			padding : 5px;
			height: 35px;
		}
		
		.bioskopi-widget > ul {
			margin-top : 0px;
			background : white;
			list-style : none;
			padding-left : 0px;
		}
		
		.bioskopi-widget > ul > li {
			height : 45px; /*zbog floatova*/
			padding : 5px;
			transition: background 0.15s linear;
			position:relative; /*zbog link-spannera*/
		}
		
		.bioskopi-widget > ul > li:HOVER {
			background : #E5FAE1;
			
		}
		
		.link-spanner{
			position:absolute; 
			width:100%;
			height:100%;
			top:0;
			left: 0;
			z-index: 1;
		
		  /* edit: fixes overlap error in IE7/8, 
		     make sure you have an empty gif 
		  background-image: url('empty.gif');*/
		}
		
		.search-button {
			border: 0;
			color: #A16073;
			box-shadow: none;
			border-radius: 0px;
			padding : 2px 5px;
			background: white;
			transition: background 0.1s linear;
		}
		.search-button:HOVER {
			background: #ddd;
		}
		
		/*onaj bar sa 'uloguj se' i 'registruj se'*/
		.reg-log-bar {
			background: white;
			margin: 30px;
			padding : 10px;
		}
		.reg-log-bar > div {
			width: 40%;
  			margin: 0 auto;
			background: #eee;
		}
		.button-card {
			padding: 15px;
		}
		.button-card > span {
			color: grey;
		}
		.button-card > a {
			border: 0;
			color: white;
			padding : 15px 15px;
			background: #A16073;
			display: block;
  			text-decoration: none;
  			transition: background 0.1s linear;
		}
		.button-card > a:HOVER {
			background: #aaa;
		}
		
	</style>
					
</head>
<body style='background:#e1f7d5;'>
	<div class='top-header'>
		<div class='title'>Bioskopi i pozorista</div>
		<div class='subtitle'>Dobrodosli...lorem ipsumasnf ajnsfjnasjnfjansjfnakdsn</div>
	
	</div>
	
	<div class = 'reg-log-bar'>
		<div class='row'>
			<div class='col-sm-6 button-card'>
				<span>Imas nalog?</span>
				<br>
				<a href='login.html'>Prijavi se</a>
			</div>
			<div class='col-sm-6 button-card '>
				<span>Jos nemas nalog?</span>
				<br>
				<a href='register.html'>Registruj se</a>
			</div>
		</div>
	</div>
	
	<div class='row content'>
		<div class='col-sm-6 bioskopi-widget'>
			<div class='header'>
				Bioskopi
				<button class='search-button' data-toggle='collapse' data-target='#b-search' style='float:right;'>Pretraga</button>
			</div>
			
			<div id='b-search' class='collapse' style='padding:5px;text-align:right;'>
				<input id='bioskopi-search-box' type='text' placeholder="Trazi bioskope..." oninput="traziBioskope()">
			</div>
			<ul id='bioskopi'></ul>
		</div>
		<div class='col-sm-6 bioskopi-widget'>
			<div class='header'>
				Pozorista
				<button class='search-button' data-toggle='collapse' data-target='#p-search' style='float:right;'>Pretraga</button>
			</div>
			
			<div id='p-search' class='collapse' style='padding:5px;text-align:right;'>
				<input id='pozorista-search-box' type='text' placeholder="Trazi pozorista..." oninput="traziPozorista()">
			</div>
			<ul id='pozorista'></ul>
		</div>
	</div>
	
</body>
</html>